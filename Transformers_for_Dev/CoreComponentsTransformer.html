<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transformer Architecture Diagram</title>
    <style>
      .component {
        stroke: #333;
        stroke-width: 2;
      }
      .label {
        font-family: Arial, sans-serif;
        font-size: 14px;
        text-anchor: middle;
      }
      .arrow {
        fill: none;
        stroke: #666;
        stroke-width: 2;
        marker-end: url(#arrowhead);
      }
      .attention {
        fill: #ff9999;
      }
      .norm {
        fill: #99ccff;
      }
      .feedforward {
        fill: #99ff99;
      }
      .add {
        fill: #ffff99;
      }
    </style>
  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600">
      <rect width="1200" height="600" fill="#ffffff" />

      <!-- Input -->
      <text x="50" y="80" class="label" text-anchor="start">Input</text>

      <!-- Multi-Head Attention -->
      <rect
        x="100"
        y="50"
        width="250"
        height="100"
        class="component attention" />
      <text x="225" y="95" class="label">Multi-Head Attention</text>

      <!-- Softmax -->
      <rect
        x="160"
        y="160"
        width="130"
        height="30"
        class="component attention" />
      <text x="225" y="180" class="label">Softmax</text>

      <!-- Add -->
      <circle cx="400" cy="100" r="20" class="component add" />
      <text x="400" y="105" class="label">+</text>

      <!-- Layer Norm -->
      <rect x="450" y="50" width="150" height="100" class="component norm" />
      <text x="525" y="95" class="label">Layer Norm</text>

      <!-- Feed Forward -->
      <rect
        x="650"
        y="50"
        width="200"
        height="100"
        class="component feedforward" />
      <text x="750" y="80" class="label">Feed Forward</text>
      <rect x="690" y="90" width="120" height="25" fill="white" stroke="#333" />
      <text x="750" y="108" class="label" font-size="12">ReLU Activation</text>

      <!-- Add -->
      <circle cx="900" cy="100" r="20" class="component add" />
      <text x="900" y="105" class="label">+</text>

      <!-- Layer Norm -->
      <rect x="950" y="50" width="150" height="100" class="component norm" />
      <text x="1025" y="95" class="label">Layer Norm</text>

      <!-- Output -->
      <text x="1120" y="95" class="label" text-anchor="start">Output</text>

      <!-- Arrows -->
      <path d="M80 80 H100" class="arrow" />
      <path d="M350 100 H380" class="arrow" />
      <path d="M420 100 H450" class="arrow" />
      <path d="M600 100 H650" class="arrow" />
      <path d="M850 100 H880" class="arrow" />
      <path d="M920 100 H950" class="arrow" />
      <path d="M1100 95 H1120" class="arrow" />

      <!-- Legend -->
      <rect x="50" y="350" width="20" height="20" class="component attention" />
      <text x="80" y="365" class="label" text-anchor="start">Attention</text>
      <rect x="50" y="380" width="20" height="20" class="component norm" />
      <text x="80" y="395" class="label" text-anchor="start">
        Normalization
      </text>
      <rect
        x="50"
        y="410"
        width="20"
        height="20"
        class="component feedforward" />
      <text x="80" y="425" class="label" text-anchor="start">Feed Forward</text>
      <rect x="50" y="440" width="20" height="20" class="component add" />
      <text x="80" y="455" class="label" text-anchor="start">Addition</text>

      <!-- Arrowhead definition -->
      <defs>
        <marker
          id="arrowhead"
          markerWidth="10"
          markerHeight="7"
          refX="0"
          refY="3.5"
          orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" />
        </marker>
      </defs>
    </svg>
  </body>
</html>
